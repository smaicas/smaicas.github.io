function f(){window.AudioJs=new l.AudioJsClass}var l;(h=>{class _{constructor(){this._audioMimeType="audio/mpeg",this._audioBitsPerSecond=256e3}RecordAudio(){return new Promise(async e=>{this._currentStream=await navigator.mediaDevices.getUserMedia({audio:!0}),this._audioBitsPerSecond,this._audioMimeType;const o=new MediaRecorder(this._currentStream);let t=[];o.addEventListener("dataavailable",i=>{t.push(i.data)}),e({start:()=>{t=[],o.start()},stop:()=>new Promise(i=>{o.addEventListener("stop",()=>{const r=new Blob(t,{type:this._audioMimeType}),a=URL.createObjectURL(r),s=new Audio(a);i({audioChunks:t,audioBlob:r,audioUrl:a,play:()=>s.play()})}),o.stop()})})})}async StartRecording(){this._recorder||(this._recorder=await this.RecordAudio()),this._recorder.start()}async StopRecording(){return this._audio=await this._recorder.stop(),this._audio}async SetAudioSource(e){return e.src=this._audio.audioUrl,this._audio.audioUrl}async VisualizeCanvas(e){let o=this._currentStream;const t=e.getContext("2d");let d=new AudioContext;const g=d.createMediaStreamSource(o),i=d.createAnalyser();i.fftSize=2048;const r=i.frequencyBinCount,a=new Uint8Array(r);g.connect(i),s();function s(){const c=e.width,S=e.height;requestAnimationFrame(s),i.getByteTimeDomainData(a);let w=getComputedStyle(e).getPropertyValue("background-color");t.fillStyle=w||"rgb(255,255,255)",t.fillRect(0,0,c,S),t.lineWidth=2,t.strokeStyle="rgb(0, 0, 0)",t.beginPath();let C=c*1/r,u=0;for(let n=0;n<r;n++){let p=a[n]/128*S/2;n===0?t.moveTo(u,p):t.lineTo(u,p),u+=C}t.lineTo(e.width,e.height/2),t.stroke()}}}h.AudioJsClass=_;function m(y){for(var e="",o=getComputedStyle(y),t=0;t<o.length;t++)e+=o[t]+":"+o.getPropertyValue(o[t])+";<br>";return e}h.getCSS=m})(l||(l={}));f();
